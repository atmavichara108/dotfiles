##### BASICS ############################################################
set -g default-terminal "tmux-256color"          # 1  TERM
set -ga terminal-overrides ',*:Tc:sitm=\E[3m'    # 5  true-color + –∫—É—Ä—Å–∏–≤
set -g mouse on                                  # 2  –µ–¥–∏–Ω–æ–∂–¥—ã
set -g history-limit 10000
set -g base-index 1
setw -g pane-base-index 1
set -g set-clipboard on                          # 11 OSC52 fallback –ø–æ SSH

##### PREFIX ############################################################
unbind C-b
set -g prefix C-a
bind C-a send-prefix
bind C-b send-prefix                             # 4  fallback

##### NAVIGATION ########################################################
# —Å—Ç—Ä–µ–ª–∫–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º
unbind -n Up
unbind -n Down
unbind -n Left
unbind -n Right

bind Up    select-pane -U
bind Down  select-pane -D
bind Left  select-pane -L
bind Right select-pane -R
# vim-—Å—Ç–∞–π–ª
is_vim="ps -o comm= -t '#{pane_tty}' | grep -qiE '(^|/)g?(view|n?vim)(diff)?$'"
bind -n C-h if-shell "$is_vim" "send-keys C-h" "select-pane -L"   # 3
bind -n C-j if-shell "$is_vim" "send-keys C-j" "select-pane -D"
bind -n C-k if-shell "$is_vim" "send-keys C-k" "select-pane -U"
bind -n C-l if-shell "$is_vim" "send-keys C-l" "select-pane -R"

##### SPLITS + RESIZE ###################################################
bind - split-window -v
bind = split-window -h
unbind '"' ; unbind %
# resize –Ω–∞ hjkl (+Shift –¥–ª—è √ó5)
bind -r h resize-pane -L 5
bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5
bind -r C-Up    resize-pane -U
bind -r C-Down  resize-pane -D
bind -r C-Left  resize-pane -L
bind -r C-Right resize-pane -R

##### WINDOWS / PANES / SESSIONS ########################################
bind c new-window
bind n next-window
bind p previous-window
bind l last-window
bind & kill-window
bind , command-prompt "rename-window '%%'"
bind w choose-window
bind C new-session
bind '$' command-prompt "rename-session '%%'"
bind s choose-session
bind d detach-client
bind o select-pane -t :.+
bind q display-panes
bind x kill-pane
bind z resize-pane -Z
bind Space next-layout

##### COPY / PASTE (–ø—Ä–æ—Å—Ç–æ) #############################################
# 11  –¢—Ä–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è:
#  a) v / y –≤ copy-mode ‚Üí —Å–∏—Å—Ç–µ–º–Ω—ã–π clipboard (tmux-yank)
#  b) –≤—ã–¥–µ–ª–∏–ª –º—ã—à—å—é –≤ –ª—é–±–æ–º GUI ‚Üí MiddleClick –≤ nvim/tmux/–±—Ä–∞—É–∑–µ—Ä–µ, –∫–∞–∫ –æ–±—ã—á–Ω–æ
#  c) ssh-—Å–µ—Å—Å–∏–∏ ‚Üí OSC52 –∫–æ–ø–∏—Ä—É–µ—Ç –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
setw -g mode-keys vi
# bind -T copy-mode-vi v send -X begin-selection
# bind -T copy-mode-vi y send -X copy-selection-and-cancel
# ‚Äî‚Äî‚Äî‚Äî‚Äî  Middle-click ‚Üí –≤—Å—Ç–∞–≤–∏—Ç—å X PRIMARY  ‚Äî‚Äî‚Äî‚Äî‚Äî
unbind -T root MouseDown2Pane          # —É–±–∏—Ä–∞–µ–º –¥–µ—Ñ–æ–ª—Ç
bind   -T root MouseDown2Pane  run-shell -b \
  "tmux load-buffer - < <(xclip -o -selection primary) ; tmux paste-buffer -d"

##### STATUS-LINE (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π) #########################################
set -g status-interval 5
set -g status-left  "#[fg=colour47]üîã#(acpi | cut -d','  -f2-2)"
set -g status-right "#[fg=colour28]%Y-%m-%d %H:%M #[default]"
set -g window-style "bg=default" 
##### TPM + PLUGINS #####################################################
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-yank'          # 7 + 11
set -g @plugin 'tmux-plugins/tmux-open'          # 7  URL-open
set -g @plugin 'erikw/tmux-power'

# tmux-yank –∫–æ–Ω—Ñ–∏–≥: xclip, –¥–≤–∞ –±—É—Ñ–µ—Ä–∞
set -g @yank_selection 'clipboard'
set -g @clipboard "xclip -selection clipboard -in"

# –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π
set -g @resurrect-strategy-nvim 'session'
set -g @continuum-restore 'on'
set -g @continuum-save-interval '15'

run '~/.tmux/plugins/tpm/tpm'                    # –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–º

##### MOUSE DRAG COPY ###################################################
# –ü—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –õ–ö–ú –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–∞–∑—É –≤ –æ–±–∞ X-–±—É—Ñ–µ—Ä–∞
unbind -T copy-mode-vi  MouseDragEnd1Pane
unbind -T copy-mode     MouseDragEnd1Pane

bind -T copy-mode-vi  MouseDragEnd1Pane \
  send -X copy-pipe-and-cancel "xclip -i -selection clipboard -f \
    | xclip -i -selection primary"

bind -T copy-mode     MouseDragEnd1Pane \
  send -X copy-pipe-and-cancel "xclip -i -selection clipboard -f \
    | xclip -i -selection primary"
